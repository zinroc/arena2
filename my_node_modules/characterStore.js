var Promise = Promise || require("bluebird");



/**
 * Interacts with character state
 * Requires knex when loaded
 */
module.exports = function (knex) {
    this.knex = knex;

    return {
        /**
        * Get characterInfo
        */
        get: function (){
            return knex("characters")
            .select("*")
            .then(function (rows){
                return rows[0];
            })
        },
        /**
        * Create a character
        */
        create: function (name){
            return knex("characters")
            .insert({name: name})
            .returning("id")
            .then(function (rows){
                return rows[0];
            })
        },
    };
};