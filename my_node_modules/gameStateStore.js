module.exports = function (knex) {
    return {
        get: function () {
            return knex("game_state").select("*").where("id", 1)
            .then(function (rows) {
                return rows[0];
            });
        },
        update: function (gameState) {
            return knex("game_state").where("id", 1)
            .update(gameState);
        },
        dropTables: function (){
            return knex.schema.dropTable('encounter_elders')
            .then(function (){
                return knex.schema.dropTable('encounter_characters')
            }).then(function (){
                return knex.schema.dropTable('characters')
            }).then(function (){
                return knex.schema.dropTable('encounters')
            }).then(function (){
                return knex.schema.dropTable('elders')
            }).then(function (){
                return knex.schema.dropTable('regions')
            }).then(function (){
                return true;
            });
        }
    };
};
